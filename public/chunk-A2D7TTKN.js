import{$ as y,Da as N,G as m,J as _,K as P,L as v,M as x,N as u,O as e,P as t,Q as s,V as D,X as A,Y as n,Z as C,_ as I,ba as w,ea as R,fa as T,ha as O,ia as V,na as j,oa as G,pa as M,qa as B,r as b,ra as H,sa as $,ta as L,ua as q,va as z,wa as U,xa as J,ya as K}from"./chunk-WJXPAQLL.js";function Y(o,a){o&1&&(e(0,"div",36),s(1,"input",37),n(2," \xC9pouse Vivante "),t())}function Z(o,a){o&1&&(e(0,"div",36),s(1,"input",38),n(2," \xC9poux Vivant "),t())}function ee(o,a){o&1&&(e(0,"div",39),s(1,"i",40),e(2,"p"),n(3,"Configurez la famille pour voir le calcul."),t()())}function te(o,a){if(o&1&&(e(0,"tr")(1,"td",44)(2,"div",49),n(3),t(),e(4,"div",50),n(5),t()(),e(6,"td",51)(7,"span",52),n(8),t(),e(9,"div",53),s(10,"div",54),t()(),e(11,"td",46)(12,"div",55),n(13),y(14,"number"),e(15,"small",56),n(16,"DT"),t()()()()),o&2){let l=a.$implicit;m(3),C(l.name),m(2),C(l.note),m(3),C(l.shareFraction),m(2),A("width",l.sharePercent,"%"),m(3),I("",w(14,6,l.amount,"1.0-2")," ")}}function ne(o,a){if(o&1&&(e(0,"div",41)(1,"table",42)(2,"thead",43)(3,"tr")(4,"th",44),n(5,"H\xE9ritier"),t(),e(6,"th",45),n(7,"Part"),t(),e(8,"th",46),n(9,"Valeur"),t()()(),e(10,"tbody"),x(11,te,17,9,"tr",47),e(12,"tr",48)(13,"td",44),n(14,"TOTAL"),t(),s(15,"td"),e(16,"td",46),n(17),y(18,"number"),t()()()()()),o&2){let l,i=D();m(11),u("ngForOf",i.results),m(6),I("",w(18,2,(l=i.heritageForm.get("netEstate"))==null?null:l.value,"1.0-2")," DT")}}var E=class o{constructor(a){this.fb=a;this.heritageForm=this.fb.group({netEstate:[1e4,[M.required,M.min(0)]],gender:["male"],husband:[!1],wife:[!0],father:[!0],mother:[!0],sons:[0],daughters:[0],siblings:[!1]})}heritageForm;results=[];ngOnInit(){console.log("Inheritance Calculator Initialized"),this.calculate(),this.heritageForm.valueChanges.subscribe(a=>{console.log("Changement d\xE9tect\xE9:",a),this.calculate()})}get isDeceasedMale(){return this.heritageForm.get("gender")?.value==="male"}calculate(){let a=this.heritageForm.value,l=a.netEstate||0,i=[],f=a.sons||0,d=a.daughters||0,p=f>0||d>0,k=f>0,X=a.siblings;if(this.isDeceasedMale&&a.wife){let r=p?.125:.25;i.push({name:"\xC9pouse",share:r,note:p?"1/8 (Enfants pr\xE9sents)":"1/4 (Pas d'enfants)"})}else if(!this.isDeceasedMale&&a.husband){let r=p?.25:.5;i.push({name:"\xC9poux",share:r,note:p?"1/4 (Enfants pr\xE9sents)":"1/2 (Pas d'enfants)"})}a.father&&(p?i.push({name:"P\xE8re",share:1/6,note:"1/6 (Enfants pr\xE9sents)",isFather:!0}):i.push({name:"P\xE8re",share:0,note:"Reste (Asaba)",isAsaba:!0,isFather:!0})),a.mother&&(p||X?i.push({name:"M\xE8re",share:1/6,note:"1/6 (Enfants ou Fratrie pr\xE9sents)"}):i.push({name:"M\xE8re",share:1/3,note:"1/3 (Ni enfants ni fratrie)"})),d>0&&!k&&(d===1?i.push({name:"Fille Unique",share:.5,note:"1/2 (Seule, sans fr\xE8re)"}):i.push({name:`Filles (${d})`,share:2/3,note:"2/3 (Pluralit\xE9, sans fr\xE8re)"}));let h=0;i.forEach(r=>{r.isAsaba||(h+=r.share)});let S=1;h>1&&(S=1/h),i.forEach(r=>{r.isAsaba?r.finalShare=0:r.finalShare=r.share*S});let c=1-h*S;if(c<0&&(c=0),c>0){if(k){let r=f*2+d,g=c/r;i.push({name:`Fils (${f})`,finalShare:g*2*f,note:"Asaba (2 parts/fils)"}),d>0&&i.push({name:`Filles (${d})`,finalShare:g*d,note:"Avec les fils (1 part/fille)"}),c=0}else if(a.father){let r=i.find(g=>g.isFather);r&&(r.finalShare+=c,r.note+=" + Reste"),c=0}}this.results=i.map(r=>({name:r.name,shareFraction:(r.finalShare*100).toFixed(2)+"%",sharePercent:r.finalShare*100,amount:Math.round(r.finalShare*l),note:r.note})),c>.001&&this.results.push({name:"Reste (Agnats \xE9loign\xE9s)",shareFraction:(c*100).toFixed(2)+"%",sharePercent:c*100,amount:Math.round(c*l),note:"Fr\xE8res, Oncles, ou Tr\xE9sor"})}static \u0275fac=function(l){return new(l||o)(_(J))};static \u0275cmp=P({type:o,selectors:[["app-inheritance-calculator"]],standalone:!1,decls:56,vars:5,consts:[[1,"row","g-4"],[1,"col-lg-4"],[1,"card","card-custom","h-100","bg-white"],[1,"card-header-custom"],[1,"mb-0"],[1,"fas","fa-sliders-h","me-2","text-success"],[1,"card-body"],[3,"formGroup"],[1,"mb-3"],[1,"form-label","small","fw-bold","text-muted"],["type","number","formControlName","netEstate",1,"form-control","form-control-lg","fw-bold","text-success"],[1,"mb-3","p-3","bg-light","rounded-3"],[1,"d-block","small","fw-bold","text-muted","mb-2"],["role","group",1,"btn-group","w-100"],["type","radio","formControlName","gender","value","male","id","gM",1,"btn-check"],["for","gM",1,"btn","btn-outline-success"],["type","radio","formControlName","gender","value","female","id","gF",1,"btn-check"],["for","gF",1,"btn","btn-outline-success"],[1,"small","fw-bold","text-muted"],[1,"d-flex","gap-2"],[1,"form-check","form-switch","bg-light","p-2","rounded","flex-fill"],["type","checkbox","formControlName","father",1,"form-check-input","ms-0","me-2"],["type","checkbox","formControlName","mother",1,"form-check-input","ms-0","me-2"],["class","form-check form-switch bg-light p-2 rounded",4,"ngIf"],[1,"row","g-2"],[1,"col-6"],["type","number","formControlName","sons",1,"form-control"],["type","number","formControlName","daughters",1,"form-control"],[1,"col-lg-8"],[1,"card","card-custom","h-100"],[1,"card-header-custom","bg-success","text-white","d-flex","align-items-center",2,"background","#0F5132 !important","color","white !important"],[1,"mb-0","text-white"],[1,"fas","fa-chart-pie","me-2"],[1,"card-body","p-0"],["class","text-center py-5 text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"form-check","form-switch","bg-light","p-2","rounded"],["type","checkbox","formControlName","wife",1,"form-check-input","ms-0","me-2"],["type","checkbox","formControlName","husband",1,"form-check-input","ms-0","me-2"],[1,"text-center","py-5","text-muted"],[1,"fas","fa-users-slash","fa-3x","mb-3","opacity-25"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"ps-4","py-3"],[1,"text-center"],[1,"text-end","pe-4"],[4,"ngFor","ngForOf"],[1,"bg-light","fw-bold","border-top"],[1,"fw-bold","text-dark"],[1,"small","text-muted"],[1,"text-center",2,"min-width","150px"],[1,"badge","bg-warning","text-dark","mb-1"],[1,"progress",2,"height","4px"],[1,"progress-bar","bg-success"],[1,"fw-bold","fs-5","text-success"],[1,"fs-6","text-muted"]],template:function(l,i){l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),s(5,"i",5),n(6,"Donn\xE9es"),t()(),e(7,"div",6)(8,"form",7)(9,"div",8)(10,"label",9),n(11,"Montant (DT)"),t(),s(12,"input",10),t(),e(13,"div",11)(14,"label",12),n(15,"Le D\xE9funt"),t(),e(16,"div",13),s(17,"input",14),e(18,"label",15),n(19,"Homme"),t(),s(20,"input",16),e(21,"label",17),n(22,"Femme"),t()()(),e(23,"div",8)(24,"label",18),n(25,"Parents"),t(),e(26,"div",19)(27,"div",20),s(28,"input",21),n(29," P\xE8re "),t(),e(30,"div",20),s(31,"input",22),n(32," M\xE8re "),t()()(),e(33,"div",8)(34,"label",18),n(35,"Conjoint"),t(),x(36,Y,3,0,"div",23)(37,Z,3,0,"div",23),t(),e(38,"div",24)(39,"div",25)(40,"label",18),n(41,"Fils"),t(),s(42,"input",26),t(),e(43,"div",25)(44,"label",18),n(45,"Filles"),t(),s(46,"input",27),t()()()()()(),e(47,"div",28)(48,"div",29)(49,"div",30)(50,"h5",31),s(51,"i",32),n(52,"R\xE9partition L\xE9gale"),t()(),e(53,"div",33),x(54,ee,4,0,"div",34)(55,ne,19,5,"div",35),t()()()()),l&2&&(m(8),u("formGroup",i.heritageForm),m(28),u("ngIf",i.isDeceasedMale),m(),u("ngIf",!i.isDeceasedMale),m(17),u("ngIf",i.results.length===0),m(),u("ngIf",i.results.length>0))},dependencies:[R,T,$,G,L,j,q,B,H,z,U,O],styles:[".card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#198754;border-color:#198754}"]})};var ie=[{path:"",component:E}],F=class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=v({type:o});static \u0275inj=b({imports:[N.forChild(ie),N]})};var W=class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=v({type:o});static \u0275inj=b({imports:[V,F,K]})};export{W as InheritanceModule};
